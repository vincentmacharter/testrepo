pipeline {
    agent any 
    stages {
	stage('Build'){
	    steps {
	    	echo 'Starting up eureka cluster...'
		withKubeConfig(caCertificate: 'LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUU5ekNDQXQrZ0F3SUJBZ0lSQU05dUxjejM2WmMzd2ZsVzdvdkhOc1V3RFFZSktvWklodmNOQVFFTEJRQXcKRFRFTE1Ba0dBMVVFQXhNQ1kyRXdIaGNOTVRnd05qRTBNVFV5TmpNMVdoY05NakF3TmpFek1UVXlOak0xV2pBcQpNUmN3RlFZRFZRUUtFdzV6ZVhOMFpXMDZiV0Z6ZEdWeWN6RVBNQTBHQTFVRUF4TUdZMnhwWlc1ME1JSUNJakFOCkJna3Foa2lHOXcwQkFRRUZBQU9DQWc4QU1JSUNDZ0tDQWdFQTdHLzRwQU02cmRwM1FkRmVMM0JJZXFENzBNZVQKb0xnUzV4bElHbzR5SWJnemV5MWdqRHkrMW1hSlFiZTNWTWEwN1FNSUZtU0FRdWQ1bk5wNDNPSGE1OWRFM2lOUwplVjhBdy9kWHRQamZOZzI5WFhRTHJJc1JyMzZTQ2t6b3lwT1ljT3FSWGVTVnQ4bmZqKytYbUZPRElGWDRvT1YxCmlSa3ZldEZMU3hZSzFiZ2RINW82M1pzeGxuZC96eFB2bmxvLzJ1K25WWVU4enUrNUZTTzlwemNSNUFnYjNGMlkKQ3Z3OExYZkpZdEtlVURiRndQa2NhRFNKNUdkcFkvOGkybW1BbFRvYUdFbjNCUmJwclF1TXhyQk01WFpWYmVDVgo1Y1I1QVlZV216M0xQR0ZjWFU1bzRKL3NGemZleEFvY09qQU9ZMmRidFZBVDdJTXowMkovdFhUSEM3Q0dWQi9aCjJGa0ZmVkc5Ui80WisreHdGMlNjc0VJcGRnSHV0ZmkzaERNOUNWdnFwdjJGUS91VjZMYURUNVVUa2JCMzhLSmwKaVppeUd2RjJyZVR6VFRNWkM1OWt1K2ducTB4bU4rd2ZRb3YrMEx0M1I3VFNKZThOd09aZE12T0pLN2NpdldCdwprMkMzYjFtNzlTNmpMUUdrenBNendqUS9pR1YzN2FPSFhoMEQ4OTl4cDBYRUt5Q0w2U3hlUXpWTjhFV3phTGVBCjNJRnY0SWVudTcxbVZQK1pWV1BIU0FFbTNWWlhZLzdwMTltRVZKWEhPMjNpTk5zOCtISmxnellVN2FBeWpyYzAKV1VrSmNiU01WRXgvMng1V2xuc2o3a0VNU214VDU2Wk1tUVZiZFg4a3M0NFlXdTFIZnpjdlcrU3I3Wmc3S0xKSApjbm51azlaWno2UkxlOTBDQXdFQUFhTTFNRE13RGdZRFZSMFBBUUgvQkFRREFnV2dNQk1HQTFVZEpRUU1NQW9HCkNDc0dBUVVGQndNQ01Bd0dBMVVkRXdFQi93UUNNQUF3RFFZSktvWklodmNOQVFFTEJRQURnZ0lCQUNKWVdkZW4KMUd2dXVWZWhSZ21vWGRHNTI4eDRMbXF4bnI5RjlaYWcvOVF1cWtvUUovb05aNVQ3cklkejVRZ2F3UlVoYXZ6aQpPbnpTMFpNNUlkUHdkeVB0NDJQWTZJSm1CSnA5S0h3cnRWbFF4OFVwV2ltbXpCMXRYdGZxUEpVNEZvby82bDNZCnVRUm0xSWFQdUk2UnNKb2FvblUwa0lNWWo5ZGw4K0hSZklucXBVL0wvK0tEU1F6SEQ3eG9ES3Zlc3ZJNW1QVFYKN21vZUp0R0d3WmlQeG84L0pFTXUvQzNobjEvTVlOYjFyejBKYmkybkdhejI1T1B2UTJjSmxvWjNyNUlsQ3V0awpsa1dNTWZaUFo3NHFWQnl0ZDlwYmF3eDVIWnBNa2FXY0IwL0VCWnFvYmM1emREK2tEVXFOTUFRSzFnaGM1dHB1CkZwMlFRUDlWdEh3d1lzQllzQVZyYU55NkZFdS9GNlFpYysrYk9QK0xMcVZTREFqczNkc050V1RaZkl3Y28rdmkKTlpQT0wwUGREMUh3NitzZGZ5amRLaFJPdk1oVnd6aDJFMENVeE8xZEVWWDBlTjFMSEV5ejdpUDdzeFROY2pPdApBdzRmVFp4dDNXTG1LTDc1QzhPSDZqL0lWUUxCTVY0WXpVc1F3UFo4RC9vUm5nZXBFYlU1WmZJRE44K0ZoQmxBCnBxcGkwU0FRN3RkQnZ4ZnpKRmRsWlNSMExPNlNwczlXNWJPNDBvSzNsenY5Lys4OGgwZ0dNbDBqL2lwbU1iYnEKakdqMXlOcG1JNEJPSG5xbXErSTR3bTNUSWJ0M3FvTGJjbWtlOU55bC9IS0Rkbk1qNTZOREJZbHRZcmxZcjV4VgpuYTlpRThKMVVYNGl6N1R3Q1BNSXZlWEFpanhxTXV1RElkVGYKLS0tLS1FTkQgQ0VSVElGSUNBVEUtLS0tLQo=
', credentialsId: 'ff218051-42b7-459c-b199-2c82c7063ee4', serverUrl: 'platform-test-eureka-ca213c38.hcp.eastus.azmk8s.io') {
    		    sh 'kubectl get nodes'
		}


	    }
	}

        /*stage('DNS Assignment') {
            steps {
                echo 'Testing Java App...'
                sh './update-public-ip-dns.sh eureka1 eurekatest-vincent eureka1svc'
                echo 'Assignment complete'
            }
        }*/
    }
}
